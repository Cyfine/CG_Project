<!DOCTYPE html>
<html>
  <head>
    <title>Simple Solar System</title>
    <style>
      html, body { margin: 0; padding: 0; overflow: hidden; }
    </style>
  </head>

  <body>
    <script src="js/three.js"></script>
    <script src="js/controls/TrackballControls.js"></script>
    <script>
        // JavaScript will go here.
        var scene = new THREE.Scene();
        scene.background = new THREE.Color( 0x000000 );

        var aspect = window.innerWidth / window.innerHeight;
        var width = window.innerWidth;
        var height = window.innerHeight;
        var camera = new THREE.OrthographicCamera(width / - 2, width / 2, height / 2, height / - 2, 1, 2000);
        var renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );
        document.body.appendChild( renderer.domElement );
        controls = new THREE.TrackballControls(camera);
        // instantiate a loader
        var texLoader = new THREE.TextureLoader();

        var geometry = new THREE.SphereGeometry( 100, 248, 248 );
        var texture = texLoader.load("textures/texture_sun.jpg");
        //var material = new THREE.MeshNormalMaterial({wireframe: true});
        var material = new THREE.MeshBasicMaterial({
            map:texture
        })
        var sun = new THREE.Mesh( geometry, material );

        var geometry_e = new THREE.SphereGeometry(40,32,32);
        var texture = texLoader.load("textures/1_earth_8k.jpg");
        var material_e = new THREE.MeshPhongMaterial({
            map: texture,
            color : 0x6b93d6,
            shininess: 30
        });
        var earth = new THREE.Mesh(geometry_e, material_e );
        //earth.position.x=200;
       

        var geometry_m = new THREE.SphereGeometry(15,32,32);
        var texture = texLoader.load("textures/moon-surface1k.jpg");
        var material_m = new THREE.MeshLambertMaterial({
            color : 0xEBC815,
            map: texture,
        });
        var moon = new THREE.Mesh(geometry_m, material_m );
        moon.position.x=280;
       

        scene.add( sun );
        scene.add(earth);
        scene.add(moon);
        camera.position.z = 600;

        var pointLight = new THREE.PointLight(0xffffff);
        var ambientLight = new THREE.AmbientLight(0x0000ff);
        var ambientLight2 = new THREE.AmbientLight(0xffff00);

        // set its position
        pointLight.position.x = 0;
        pointLight.position.y = 0;
        pointLight.position.z = 0;

        // add to the scene
        scene.add(pointLight);
        scene.add(ambientLight);
        scene.add(ambientLight2);

        var pivot = new THREE.Group();
        pivot.add(earth);
        pivot.add(moon);

        scene.add(pivot);
        pivot.position.x = 300;

        moon.position.x = 50;
        earth.position.x = -50;
        

        var au = 0;
        var render = function () {
        requestAnimationFrame( render );
        sun.rotation.y+=0.01;
        earth.rotation.y+=0.1;
        moon.rotation.y+=0.1;
        au+=0.01;
        pivot.position.x = 400* Math.cos(au);
        pivot.position.z = 400* Math.sin(au);
        moon.position.x = earth.position.x + 50 * Math.cos(3*au);
        moon.position.z = earth.position.z + 50 * Math.sin(3*au);
 
        controls.update();
        renderer.render( scene, camera );
        };

        render();
    </script>
  </body>
</html>