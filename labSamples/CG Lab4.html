<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CG Lab4</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h3 id="exercise-1.">Exercise 1.</h3>
<pre><code>glsl
// Your code here

precision highp float;
uniform float time;
uniform vec2 resolution;
varying vec3 fPosition;
varying vec3 fNormal;

void main()
{
  gl_FragColor = vec4(fNormal.z*0.5+0.5, fNormal.y*0.5+0.5, fNormal.x , 1.0); 
} 
</code></pre>
<h3 id="exercise-2.">Exercise 2.</h3>
<pre><code>glsl
// Your code here

precision highp float;
uniform float time;
uniform vec2 resolution;
varying vec3 fPosition;
varying vec3 fNormal;

void main()
{
  gl_FragColor = vec4(fPosition.x+0.2, fPosition.y+0.4, fPosition.z+5.6, 1.0);
}
</code></pre>
<h3 id="exercise-3.">Exercise 3.</h3>
<pre><code>glsl
// Your code here

precision highp float;
uniform float time;
uniform vec2 resolution;
varying vec3 fPosition;
varying vec3 fNormal;

vec2 blinnPhongDir(vec3 lightDir, float lightInt, float Ka, float Kd, float Ks, float shininess)
{
  vec3 s = normalize(lightDir);
  vec3 v = normalize(-fPosition);
  vec3 n = normalize(fNormal);
  vec3 h = normalize(v+s);
  float diffuse = Ka + Kd * lightInt * max(0.0, dot(n, s));
  float spec =  Ks * lightInt * pow(max(0.0, dot(n,h)), shininess);
  return vec2(diffuse, spec);
}

void main()
{ 
  vec3 lightDir = vec3(10.0, 1.0, 1.0);
  vec3 lightVector = lightDir - fPosition;
  
  vec2 ds = blinnPhongDir(lightVector, 1.0, 0.2, 0.5, 1.0, 100.0);
  
  float brightness = ds.x + ds.y;

  gl_FragColor = vec4(brightness * fNormal, 1.0);
}
</code></pre>
<h3 id="exercise-4.">Exercise 4.</h3>
<pre><code>glsl
// Your code here

vec2 phongDir(vec3 lightDir, float lightInt, float Ka, float Kd, float Ks, float shininess)
{
  vec3 s = normalize(lightDir);
  vec3 v = normalize(-fPosition);
  vec3 n = normalize(fNormal);
  float diffuse = Ka + Kd * lightInt * max(0.0, dot(n, s));
  vec3 r = normalize(2.0 * n * dot(n, s) - s);
  float anglecos = dot(r, v);
  float spec = Ks * lightInt * pow(max(0.0, anglecos), shininess);
  return vec2(diffuse, spec);
}
</code></pre>
<h3 id="exercise-5-solution1.">Exercise 5 (solution1).</h3>
<pre><code>glsl
// Your code here
precision highp float;
varying vec3 fNormal;

vec3 cel(vec3 color){
  if (color.x &lt; 0.2) color.x = 0.1;
  else if (color.x &lt; 0.4) color.x = 0.3;
  else if (color.x &lt; 0.6) color.x = 0.5;
  else if (color.x &lt; 0.8) color.x = 0.7;
  else color.x = 0.9;
  
  if (color.y &lt; 0.2) color.y = 0.1;
  else if (color.y &lt; 0.4) color.y = 0.3;
  else if (color.y &lt; 0.6) color.y = 0.5;
  else if (color.y &lt; 0.8) color.y = 0.7;
  else color.y = 0.9;
  
  if (color.z &lt; 0.2) color.z = 0.1;
  else if (color.z &lt; 0.4) color.z = 0.3;
  else if (color.z &lt; 0.6) color.z = 0.5;
  else if (color.z &lt; 0.8) color.z = 0.7;
  else color.z = 0.9;
  
  return color;  
}

void main()
{
  vec3 color = cel(fNormal);
  gl_FragColor = vec4(color, 1.0);
} 
</code></pre>
<h3 id="exercise-5-solution2.">Exercise 5 (solution2).</h3>
<pre><code>glsl
// Your code here

precision highp float;
uniform float time;
uniform vec2 resolution;
varying vec3 fPosition;
varying vec3 fNormal;

vec3 cel(vec3 color,  float coef){
  vec3 normal = normalize(fNormal);
  vec3 eye = normalize(-fPosition.xyz);
  float angle = dot(normal, eye);
  
  float celShadingThreshold[3];
    celShadingThreshold[0] = 0.25;
    celShadingThreshold[1] = 0.5;
    celShadingThreshold[2] = 0.75;
  float celShadingVal[4];
    celShadingVal[0] = 0.25;
    celShadingVal[1] = 0.5;
    celShadingVal[2] = 0.75;
    celShadingVal[3] = 1.0;
  
  if (angle &lt; celShadingThreshold[0])
    {
      return celShadingVal[0] * coef * color;
    }
  else if (angle &lt; celShadingThreshold[1])
    {
      return celShadingVal[1] * coef * color;
    }
  else if (angle &lt; celShadingThreshold[2])
    {
      return celShadingVal[2] * coef * color;
    }
  else
    {
      return celShadingVal[3] * coef * color;
    }
}
void main()
{
  vec3 color = cel(fNormal, 1.0);
  gl_FragColor = vec4(color, 1.0);
}
</code></pre>
</div>
</body>

</html>
